{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "lsockte",
    "require",
    "ProtoBuf",
    "notice",
    "msgcode",
    "packet",
    "cmm",
    "_isinit",
    "_pb",
    "_ip",
    "_socket",
    "_link_times",
    "Return",
    "init",
    "cc",
    "loader",
    "loadRes",
    "err",
    "arr",
    "protoFromString",
    "reSetTimes",
    "getNetworkState",
    "state",
    "connect",
    "console",
    "log",
    "getPb",
    "getSocket",
    "send",
    "buffer",
    "connectWithFunc",
    "func",
    "env",
    "registerCallback",
    "reloginToMainView",
    "account",
    "sys",
    "localStorage",
    "getItem",
    "password",
    "p",
    "lpack",
    "pack",
    "reLogin",
    "getInstance",
    "addMsg",
    "NETWORK_UNCONNECT",
    "scenename",
    "director",
    "getScene",
    "name",
    "type",
    "msg",
    "NETWORK_RELINK",
    "NETWORK_RELOGIN",
    "self",
    "callback",
    "loadScene",
    "removeMsg",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var lsockte = require(\"Lwebsocket\")\nvar ProtoBuf = require(\"protobuf\")\nvar notice = require(\"Notice\")\nvar msgcode = require( 'Msgcode' )\nvar packet = require( 'Lpackage' )\n\nvar cmm = (function(){\n    // var Return = {\n    //     Property: \"Test Static Property\",    //��������\n    //     Method: function(){    //���з���\n    //         alert(_Field);    //����˽���ֶ�\n    //         privateMethod();    //����˽�÷���\n    //     },\n    // };    //���巵�صĹ��ж���\n \n    // var _Field = \"Test Static Field\";    //˽���ֶ�\n    // var privateMethod = function(){    //˽�з���\n    //     alert(Return.Property);    //��������\n    // }\n\n    var _isinit = false;\n \tvar _pb = null;\n \tvar _ip = \"194.168.0.179\"\n \tvar _socket = new lsockte(_ip,8001);\n \tvar _link_times = 0;\n \t\n \tvar Return = {\n \t\tinit: function(){\n \t\t\tcc.loader.loadRes(\"gamebox\", function (err, arr){\n \t\t\t\t_pb = ProtoBuf.protoFromString(arr); \n \t\t\t});\n \t\t\tvar lsockte = require(\"Lwebsocket\");\n \t\t\t_isinit = true;\n \t\t},\n \t\treSetTimes: function () {\n \t\t\t_link_times = 0;\n \t\t},\n \t\tgetNetworkState: function(){\n \t\t\treturn _socket.state;// 0 un init 1 unlink 2 linker\n \t\t},\n \t\tconnect :function (){\n \t\t\tconsole.log(\"state \"+this.getNetworkState());\n \t\t\tif(this.getNetworkState() == 3){\n \t\t\t\treturn;\n \t\t\t}\t\n\n \t\t\t_socket.connect();\n \t\t\t_link_times += 1;\n \t\t},\n \t\tgetPb: function() {\n \t\t\treturn _pb;\n \t\t},\n \t\tgetSocket: function() {\n \t\t\treturn _socket;\n \t\t},\n \t\tsend: function( buffer ) {\n \t\t\t_socket.send(buffer);\n \t\t},\n \t\tconnectWithFunc: function(func, env){\n \t\t\t_socket.registerCallback(func,env);\n \t\t\tthis.connect();\n \t\t},\n\n \t\treloginToMainView: function(){\n \t\t\tvar account = cc.sys.localStorage.getItem('account');\n \t\t\tvar password = cc.sys.localStorage.getItem('password');\n \t\t\tvar p = new packet( \"Reqlogin\" );\n\t\t    p.lpack.account = account;\n\t\t    p.lpack.password = password;\n\t\t    _socket.send(p.pack());\n \t\t},\n\n \t\treLogin: function() {\n \t\t\tif ( _link_times > 3 ){\n \t\t\t\t_link_times = 0;\n\t\t\t\tnotice.getInstance().addMsg(2,msgcode.NETWORK_UNCONNECT,null,null,908);\n\t\t\t\treturn;\n\t\t\t}\n \t\t\tvar scenename = cc.director.getScene().name;\n \t\t\tif( scenename == \"\" || scenename == \"loadingview\" || scenename == \"loginview\"){\n \t\t\t\tthis.connect();\n \t\t\t\treturn;\n \t\t\t}\n\n \t\t\tvar type = 0; // 0 do nothing 1 back to loginview 2 auto relink and to mainview\n\t\t\tvar msg = \"\";\n \t\t\tvar account = cc.sys.localStorage.getItem('account');\n \t\t\tvar password = cc.sys.localStorage.getItem('password');\n\n \t\t\tif (account != null && account != \"\"){\n \t\t\t\tmsg = msgcode.NETWORK_RELINK;\n \t\t\t\ttype = 2;\n \t\t\t}else{\n \t\t\t\tmsg = msgcode.NETWORK_RELOGIN;\n \t\t\t\ttype = 1;\n \t\t\t}\n \t\t\tvar self = this;\n \t\t\tvar callback = function() {\n \t\t\t\tif(type == 1){\n \t\t\t\t\tcc.director.loadScene(\"loginview\");\n \t\t\t\t}else if (type == 2) {\n\t\t\t\t\tself.connectWithFunc( \"reloginToMainView\", self )\n \t\t\t\t}\n \t\t\t\tnotice.getInstance().removeMsg( 908 );\n \t\t\t}\n \t\t\tnotice.getInstance().addMsg(2,msg,callback,null,908);\n \t\t}\n \t};\n    return Return;    //���ɹ��о�̬Ԫ��\n})();\n\nmodule.exports = cmm;\n\n// var StaticClass = (function(){\n//     var Return = {\n//         Property: \"Test Static Property\",    //��������\n//         Method: function(){    //���з���\n//             alert(_Field);    //����˽���ֶ�\n//             privateMethod();    //����˽�÷���\n//         },\n//     };    //���巵�صĹ��ж���\n \n//     var _Field = \"Test Static Field\";    //˽���ֶ�\n//     var privateMethod = function(){    //˽�з���\n//         alert(Return.Property);    //��������\n//     }\n//     return Return;    //���ɹ��о�̬Ԫ��\n// })();\n"
  ]
}