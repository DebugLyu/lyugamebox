{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "common",
    "require",
    "packet",
    "msgbox",
    "msgcode",
    "pMgr",
    "getInstance",
    "player",
    "sSceneMgr",
    "notice",
    "TuiBingConfig",
    "onLogin",
    "pack",
    "result",
    "obj",
    "id",
    "name",
    "gold",
    "pPlayer",
    "login",
    "msg",
    "ACCOUNT_NOT_EXISTENT",
    "PASSWORD_ERROR",
    "HAS_ONLINE",
    "addMsg",
    "onRegister",
    "onEnterRoom",
    "onChangeScene",
    "onBeBanker",
    "onTuibingUnbanker",
    "onTuibingLeaveQueue",
    "onTuiBingQueueChange",
    "node",
    "cc",
    "find",
    "gamelogic",
    "getComponent",
    "banker",
    "bankerid",
    "bankername",
    "onQueueChanged",
    "queue",
    "onTuiBingGameState",
    "state",
    "onGameStateChange",
    "State",
    "WaitOpen",
    "removeMsg",
    "onGoldChange",
    "main_role",
    "onGoldChanged",
    "onTuiBingBet",
    "pos",
    "onGoldAction",
    "onKeepBanker",
    "begincallback",
    "p",
    "lpack",
    "iskeep",
    "send",
    "endcallback",
    "TUIBING_KEEP_BANKER",
    "onBankerBegin",
    "TUIBING_BANKER_BEGIN",
    "onTuiBingBetGold",
    "onBetGoldCount",
    "onDealMajiang",
    "majiangs",
    "onOpenMajiang",
    "onCloseClient",
    "type",
    "okcallback",
    "argument",
    "NETWORK_OTHER_LOGIN",
    "onTuibingBankerInfo",
    "times",
    "onBankerInfo",
    "onResKeepBanker",
    "FuncMap",
    "msgdispatch",
    "dispatch",
    "head",
    "buffer",
    "func",
    "unpack",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var common = require(\"Common\")\nvar packet = require( \"Lpackage\" )\nvar msgbox = require(\"Msgbox\")\nvar msgcode = require( 'Msgcode' )\nvar pMgr = require(\"PlayerManager\").getInstance()\nvar player = require('Player')\nvar sSceneMgr = require(\"SceneManager\")\nvar notice = require(\"Notice\")\nvar TuiBingConfig = require(\"TuiBingConfig\")\n\n\nvar onLogin = function( pack ){\n    var result = pack.result;\n    if ( result == 0 ) {\n        var obj = {id:pack.id, name:pack.name, gold:pack.gold}\n        var pPlayer = new player();\n        pPlayer.login(obj)\n    }else{\n        var msg = \"\";\n        switch(result){\n            case 1 :{msg = msgcode.ACCOUNT_NOT_EXISTENT;}break;\n            case 2 :{msg = msgcode.PASSWORD_ERROR;}break;\n            case 3 :{msg = msgcode.HAS_ONLINE;}break;\n        }\n        msgbox.getInstance().addMsg(msg);\n    }\n}\n\nvar onRegister = function( pack ){\n    var result = pack.result ;\n    if ( result != 0 ){\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onEnterRoom = function( pack ){\n    var result = pack.result;\n    if (result == 0) {\n        sSceneMgr.onChangeScene(\"tuibingview\");\n    }else{\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onBeBanker = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onTuibingUnbanker = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onTuibingLeaveQueue = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onTuiBingQueueChange = function( pack ) {\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent(\"GameLogic\");\n        var banker = { \n            bankerid: pack.bankerid,  \n            bankername : pack.bankername,\n        }\n        gamelogic.onQueueChanged(banker, pack.queue);\n    }\n}\n\nvar onTuiBingGameState = function( pack ){\n    var state = pack.state\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        gamelogic.onGameStateChange( state )\n    }\n    if (state == TuiBingConfig.State.WaitOpen) {\n        notice.getInstance().removeMsg(998);\n    }\n}\n\nvar onGoldChange = function( pack ){\n    var gold = pack.gold;\n    pMgr.main_role.onGoldChanged( gold );\n}\n\nvar onTuiBingBet = function( pack ) {\n    var result = pack.result;\n    var id = pack.id;\n    var pos = pack.pos;\n    var gold = pack.gold;\n    if (result == 0){\n        var node = cc.find(\"GameBgLayer\");\n        if( node ){\n            var gamelogic = node.getComponent( \"GameLogic\" );\n            gamelogic.onGoldAction( id, pos, gold )\n        }\n    }else{\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar onKeepBanker = function( pack ) {\n    let begincallback = function() {\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 0;\n        p.lpack.gold = 200000;\n        common.send( p.pack() );\n    }\n    let endcallback = function() {\n        //下庄\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 1;\n        p.lpack.gold = 0;\n        common.send( p.pack() );\n    }\n    notice.getInstance().addMsg (1,msgcode.TUIBING_KEEP_BANKER, begincallback, endcallback, 998);\n}\n\nvar onBankerBegin = function( pack ) {\n    let begincallback = function() {\n        var p = new packet( \"ReqTuiBingBegin\" );\n        common.send( p.pack() );\n    }\n    let endcallback = function() {\n        //下庄\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 1;\n        p.lpack.gold = 0;\n        common.send( p.pack() );\n    }\n    notice.getInstance().addMsg (1,msgcode.TUIBING_BANKER_BEGIN, begincallback, endcallback, 998)\n}\n\nvar onTuiBingBetGold = function( pack ) {\n    var gold = pack.gold;\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        // gamelogic.onGoldAction( gold )\n        gamelogic.onBetGoldCount( gold );\n    }\n}\n\nvar onDealMajiang = function( pack ) {\n    var majiangs = pack.majiangs\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        // gamelogic.onGoldAction( gold )\n        gamelogic.onOpenMajiang( majiangs );\n    }\n}\n\nvar onCloseClient = function( pack ) {\n    var type = pack.type\n    if(type == 1){\n        let okcallback = function(argument) {\n            sSceneMgr.onChangeScene(\"loginview\");\n        }\n        notice.getInstance().addMsg ( 2, msgcode.NETWORK_OTHER_LOGIN, okcallback);\n    }\n}\n\nvar onTuibingBankerInfo = function( pack ) {\n    var obj = {\n        name:pack.name,\n        id : pack.id,\n        gold : pack.gold,\n        times : pack.times,\n    };\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        gamelogic.onBankerInfo( obj );\n    }\n}\n\nvar onResKeepBanker = function( pack ) {\n    var result = pack.result;\n    if (result != 0 ){\n        msgbox.getInstance().addMsg(result);\n    }\n}\n\nvar FuncMap = {\n    \"Reslogin\": onLogin,\n    \"ResRegister\" : onRegister,\n    \"ResEnterRoom\" : onEnterRoom,\n    \"ResBeBanker\" : onBeBanker,\n    \"ResTuiBingQueueChange\" : onTuiBingQueueChange,\n    \"ToTuiBingGameState\" : onTuiBingGameState,\n    \"ToGoldChange\" : onGoldChange,\n    \"ResTuiBingBet\" : onTuiBingBet,\n    \"ToKeepBanker\" : onKeepBanker,\n    \"ResKeepBanker\" : onResKeepBanker,\n    \"ToBankerBegin\" : onBankerBegin,\n    \"ToTuiBingBetGold\" : onTuiBingBetGold,\n    \"ToDealMajiang\" : onDealMajiang,\n    \"ToCloseClient\" : onCloseClient,\n    \"ToTuibingBankerInfo\" : onTuibingBankerInfo,\n    \"ResTuiBingUnbanker\" : onTuibingUnbanker,\n    \"ResTuibingLeaveQueue\" : onTuibingLeaveQueue,\n}\n\nvar msgdispatch = {\n    dispatch : function(head, buffer){\n        var func = FuncMap[head];\n        if (func !== null) {\n            var p = new packet( head );\n            p.unpack( buffer );\n            func( p.msg );\n        }\n    },\n};\nmodule.exports = msgdispatch;"
  ]
}