{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "packet",
    "require",
    "msgcode",
    "pMgr",
    "getInstance",
    "player",
    "sSceneMgr",
    "TuiBingConfig",
    "onLogin",
    "pack",
    "result",
    "obj",
    "id",
    "name",
    "gold",
    "pPlayer",
    "login",
    "cc",
    "ll",
    "msgbox",
    "addMsg",
    "onRegister",
    "onEnterRoom",
    "onChangeScene",
    "onBeBanker",
    "onTuibingUnbanker",
    "onTuibingLeaveQueue",
    "onTuiBingQueueChange",
    "node",
    "find",
    "gamelogic",
    "getComponent",
    "banker",
    "bankerid",
    "bankername",
    "onQueueChanged",
    "queue",
    "onTuiBingGameState",
    "state",
    "onGameStateChange",
    "State",
    "WaitOpen",
    "notice",
    "removeMsg",
    "onGoldChange",
    "main_role",
    "onGoldChanged",
    "onTuiBingBet",
    "pos",
    "onGoldAction",
    "onKeepBanker",
    "begincallback",
    "p",
    "lpack",
    "iskeep",
    "net",
    "send",
    "endcallback",
    "TUIBING_KEEP_BANKER",
    "onBankerBegin",
    "TUIBING_BANKER_BEGIN",
    "onTuiBingBetGold",
    "onBetGoldCount",
    "onDealMajiang",
    "majiangs",
    "onOpenMajiang",
    "onCloseClient",
    "type",
    "okcallback",
    "argument",
    "NETWORK_OTHER_LOGIN",
    "onTuibingBankerInfo",
    "times",
    "onBankerInfo",
    "onResKeepBanker",
    "FuncMap",
    "msgdispatch",
    "Class",
    "statics",
    "dispatch",
    "head",
    "buffer",
    "func",
    "unpack",
    "msg",
    "module",
    "exports"
  ],
  "mappings": ";;AAAA,IAAIA,SAASC,QAAS,UAAT,CAAb;AACA,IAAIC,UAAUD,QAAS,SAAT,CAAd;AACA,IAAIE,OAAOF,QAAQ,eAAR,EAAyBG,WAAzB,EAAX;AACA,IAAIC,SAASJ,QAAQ,QAAR,CAAb;AACA,IAAIK,YAAYL,QAAQ,cAAR,CAAhB;AACA,IAAIM,gBAAgBN,QAAQ,eAAR,CAApB;;AAEA,IAAIO,UAAU,SAAVA,OAAU,CAAUC,IAAV,EAAgB;AAC1B,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAKA,UAAU,CAAf,EAAmB;AACf,YAAIC,MAAM,EAACC,IAAGH,KAAKG,EAAT,EAAaC,MAAKJ,KAAKI,IAAvB,EAA6BC,MAAKL,KAAKK,IAAvC,EAAV;AACA,YAAIC,UAAU,IAAIV,MAAJ,EAAd;AACAU,gBAAQC,KAAR,CAAcL,GAAd;AACH,KAJD,MAIK;AACDM,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CATD;;AAWA,IAAIW,aAAa,SAAbA,UAAa,CAAUZ,IAAV,EAAgB;AAC7B,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAKA,UAAU,CAAf,EAAkB;AACdO,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CALD;;AAOA,IAAIY,cAAc,SAAdA,WAAc,CAAUb,IAAV,EAAgB;AAC9B,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIA,UAAU,CAAd,EAAiB;AACbJ,kBAAUiB,aAAV,CAAwB,aAAxB;AACH,KAFD,MAEK;AACDN,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CAPD;;AASA,IAAIc,aAAa,SAAbA,UAAa,CAAUf,IAAV,EAAgB;AAC7B,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIA,UAAU,CAAd,EAAiB;AACbO,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CALD;;AAOA,IAAIe,oBAAoB,SAApBA,iBAAoB,CAAUhB,IAAV,EAAgB;AACpC,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIA,UAAU,CAAd,EAAiB;AACbO,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CALD;;AAOA,IAAIgB,sBAAsB,SAAtBA,mBAAsB,CAAUjB,IAAV,EAAgB;AACtC,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIA,UAAU,CAAd,EAAiB;AACbO,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CALD;;AAOA,IAAIiB,uBAAuB,SAAvBA,oBAAuB,CAAUlB,IAAV,EAAiB;AACxC,QAAImB,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,QAAID,IAAJ,EAAU;AACN,YAAIE,YAAYF,KAAKG,YAAL,CAAkB,WAAlB,CAAhB;AACA,YAAIC,SAAS;AACTC,sBAAUxB,KAAKwB,QADN;AAETC,wBAAazB,KAAKyB;AAFT,SAAb;AAIAJ,kBAAUK,cAAV,CAAyBH,MAAzB,EAAiCvB,KAAK2B,KAAtC;AACH;AACJ,CAVD;;AAYA,IAAIC,qBAAqB,SAArBA,kBAAqB,CAAU5B,IAAV,EAAgB;AACrC,QAAI6B,QAAQ7B,KAAK6B,KAAjB;AACA,QAAIV,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,QAAID,IAAJ,EAAU;AACN,YAAIE,YAAYF,KAAKG,YAAL,CAAmB,WAAnB,CAAhB;AACAD,kBAAUS,iBAAV,CAA6BD,KAA7B;AACH;AACD,QAAIA,SAAS/B,cAAciC,KAAd,CAAoBC,QAAjC,EAA2C;AACvCxB,WAAGC,EAAH,CAAMwB,MAAN,CAAaC,SAAb,CAAuB,GAAvB;AACH;AACJ,CAVD;;AAYA,IAAIC,eAAe,SAAfA,YAAe,CAAUnC,IAAV,EAAgB;AAC/B,QAAIK,OAAOL,KAAKK,IAAhB;AACAX,SAAK0C,SAAL,CAAeC,aAAf,CAA8BhC,IAA9B;AACH,CAHD;;AAKA,IAAIiC,eAAe,SAAfA,YAAe,CAAUtC,IAAV,EAAiB;AAChC,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIE,KAAKH,KAAKG,EAAd;AACA,QAAIoC,MAAMvC,KAAKuC,GAAf;AACA,QAAIlC,OAAOL,KAAKK,IAAhB;AACA,QAAIJ,UAAU,CAAd,EAAgB;AACZ,YAAIkB,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,YAAID,IAAJ,EAAU;AACN,gBAAIE,YAAYF,KAAKG,YAAL,CAAmB,WAAnB,CAAhB;AACAD,sBAAUmB,YAAV,CAAwBrC,EAAxB,EAA4BoC,GAA5B,EAAiClC,IAAjC;AACH;AACJ,KAND,MAMK;AACDG,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CAdD;;AAgBA,IAAIwC,eAAe,SAAfA,YAAe,CAAUzC,IAAV,EAAiB;AAChC,QAAI0C,gBAAgB,SAAhBA,aAAgB,GAAW;AAC3B,YAAIC,IAAI,IAAIpD,MAAJ,CAAY,eAAZ,CAAR;AACAoD,UAAEC,KAAF,CAAQC,MAAR,GAAiB,CAAjB;AACAF,UAAEC,KAAF,CAAQvC,IAAR,GAAe,MAAf;AACAG,WAAGC,EAAH,CAAMqC,GAAN,CAAUC,IAAV,CAAgBJ,EAAE3C,IAAF,EAAhB;AACH,KALD;AAMA,QAAIgD,cAAc,SAAdA,WAAc,GAAW;AACzB;AACA,YAAIL,IAAI,IAAIpD,MAAJ,CAAY,eAAZ,CAAR;AACAoD,UAAEC,KAAF,CAAQC,MAAR,GAAiB,CAAjB;AACAF,UAAEC,KAAF,CAAQvC,IAAR,GAAe,CAAf;AACAG,WAAGC,EAAH,CAAMqC,GAAN,CAAUC,IAAV,CAAgBJ,EAAE3C,IAAF,EAAhB;AACH,KAND;AAOAQ,OAAGC,EAAH,CAAMwB,MAAN,CAAatB,MAAb,CAAqB,CAArB,EAAuBlB,QAAQwD,mBAA/B,EAAoDP,aAApD,EAAmEM,WAAnE,EAAgF,GAAhF;AACH,CAfD;;AAiBA,IAAIE,gBAAgB,SAAhBA,aAAgB,CAAUlD,IAAV,EAAiB;AACjC,QAAI0C,gBAAgB,SAAhBA,aAAgB,GAAW;AAC3B,YAAIC,IAAI,IAAIpD,MAAJ,CAAY,iBAAZ,CAAR;AACAiB,WAAGC,EAAH,CAAMqC,GAAN,CAAUC,IAAV,CAAgBJ,EAAE3C,IAAF,EAAhB;AACH,KAHD;AAIA,QAAIgD,cAAc,SAAdA,WAAc,GAAW;AACzB;AACA,YAAIL,IAAI,IAAIpD,MAAJ,CAAY,eAAZ,CAAR;AACAoD,UAAEC,KAAF,CAAQC,MAAR,GAAiB,CAAjB;AACAF,UAAEC,KAAF,CAAQvC,IAAR,GAAe,CAAf;AACAG,WAAGC,EAAH,CAAMqC,GAAN,CAAUC,IAAV,CAAgBJ,EAAE3C,IAAF,EAAhB;AACH,KAND;AAOAQ,OAAGC,EAAH,CAAMwB,MAAN,CAAatB,MAAb,CAAqB,CAArB,EAAuBlB,QAAQ0D,oBAA/B,EAAqDT,aAArD,EAAoEM,WAApE,EAAiF,GAAjF;AACH,CAbD;;AAeA,IAAII,mBAAmB,SAAnBA,gBAAmB,CAAUpD,IAAV,EAAiB;AACpC,QAAIK,OAAOL,KAAKK,IAAhB;AACA,QAAIc,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,QAAID,IAAJ,EAAU;AACN,YAAIE,YAAYF,KAAKG,YAAL,CAAmB,WAAnB,CAAhB;AACA;AACAD,kBAAUgC,cAAV,CAA0BhD,IAA1B;AACH;AACJ,CARD;;AAUA,IAAIiD,gBAAgB,SAAhBA,aAAgB,CAAUtD,IAAV,EAAiB;AACjC,QAAIuD,WAAWvD,KAAKuD,QAApB;AACA,QAAIpC,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,QAAID,IAAJ,EAAU;AACN,YAAIE,YAAYF,KAAKG,YAAL,CAAmB,WAAnB,CAAhB;AACA;AACAD,kBAAUmC,aAAV,CAAyBD,QAAzB;AACH;AACJ,CARD;;AAUA,IAAIE,gBAAgB,SAAhBA,aAAgB,CAAUzD,IAAV,EAAiB;AACjC,QAAI0D,OAAO1D,KAAK0D,IAAhB;AACA,QAAGA,QAAQ,CAAX,EAAa;AACT,YAAIC,aAAa,SAAbA,UAAa,CAASC,QAAT,EAAmB;AAChC/D,sBAAUiB,aAAV,CAAwB,WAAxB;AACH,SAFD;AAGAN,WAAGC,EAAH,CAAMwB,MAAN,CAAatB,MAAb,CAAsB,CAAtB,EAAyBlB,QAAQoE,mBAAjC,EAAsDF,UAAtD;AACH;AACJ,CARD;;AAUA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAAU9D,IAAV,EAAiB;AACvC,QAAIE,MAAM;AACNE,cAAKJ,KAAKI,IADJ;AAEND,YAAKH,KAAKG,EAFJ;AAGNE,cAAOL,KAAKK,IAHN;AAIN0D,eAAQ/D,KAAK+D;AAJP,KAAV;AAMA,QAAI5C,OAAOX,GAAGY,IAAH,CAAQ,aAAR,CAAX;AACA,QAAID,IAAJ,EAAU;AACN,YAAIE,YAAYF,KAAKG,YAAL,CAAmB,WAAnB,CAAhB;AACAD,kBAAU2C,YAAV,CAAwB9D,GAAxB;AACH;AACJ,CAZD;;AAcA,IAAI+D,kBAAkB,SAAlBA,eAAkB,CAAUjE,IAAV,EAAiB;AACnC,QAAIC,SAASD,KAAKC,MAAlB;AACA,QAAIA,UAAU,CAAd,EAAiB;AACbO,WAAGC,EAAH,CAAMC,MAAN,CAAaC,MAAb,CAAoBV,MAApB;AACH;AACJ,CALD;;AAOA,IAAIiE,UAAU;AACV,gBAAYnE,OADF;AAEV,mBAAgBa,UAFN;AAGV,oBAAiBC,WAHP;AAIV,mBAAgBE,UAJN;AAKV,6BAA0BG,oBALhB;AAMV,0BAAuBU,kBANb;AAOV,oBAAiBO,YAPP;AAQV,qBAAkBG,YARR;AASV,oBAAiBG,YATP;AAUV,qBAAkBwB,eAVR;AAWV,qBAAkBf,aAXR;AAYV,wBAAqBE,gBAZX;AAaV,qBAAkBE,aAbR;AAcV,qBAAkBG,aAdR;AAeV,2BAAwBK,mBAfd;AAgBV,0BAAuB9C,iBAhBb;AAiBV,4BAAyBC;AAjBf,CAAd;;AAoBA,IAAIkD,cAAc3D,GAAG4D,KAAH,CAAS;AACvB;AACAhE,UAAO,aAFgB;AAGvBiE,aAAQ;AACJC,kBAAW,kBAASC,IAAT,EAAeC,MAAf,EAAsB;AAC7B,gBAAIC,OAAOP,QAAQK,IAAR,CAAX;AACA,gBAAIE,SAAS,IAAb,EAAmB;AACf,oBAAI9B,IAAI,IAAIpD,MAAJ,CAAYgF,IAAZ,CAAR;AACA5B,kBAAE+B,MAAF,CAAUF,MAAV;AACAC,qBAAM9B,EAAEgC,GAAR;AACH;AACJ;AARG;AAHe,CAAT,CAAlB;AAcAC,OAAOC,OAAP,GAAiBV,WAAjB",
  "file": "unknown",
  "sourcesContent": [
    "var packet = require( \"Lpackage\" )\nvar msgcode = require( 'Msgcode' )\nvar pMgr = require(\"PlayerManager\").getInstance()\nvar player = require('Player')\nvar sSceneMgr = require(\"SceneManager\")\nvar TuiBingConfig = require(\"TuiBingConfig\")\n\nvar onLogin = function( pack ){\n    var result = pack.result;\n    if ( result == 0 ) {\n        var obj = {id:pack.id, name:pack.name, gold:pack.gold}\n        var pPlayer = new player();\n        pPlayer.login(obj)\n    }else{\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onRegister = function( pack ){\n    var result = pack.result ;\n    if ( result != 0 ){\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onEnterRoom = function( pack ){\n    var result = pack.result;\n    if (result == 0) {\n        sSceneMgr.onChangeScene(\"tuibingview\");\n    }else{\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onBeBanker = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onTuibingUnbanker = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onTuibingLeaveQueue = function( pack ){\n    var result = pack.result;\n    if (result != 0 ){\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onTuiBingQueueChange = function( pack ) {\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent(\"GameLogic\");\n        var banker = { \n            bankerid: pack.bankerid,  \n            bankername : pack.bankername,\n        }\n        gamelogic.onQueueChanged(banker, pack.queue);\n    }\n}\n\nvar onTuiBingGameState = function( pack ){\n    var state = pack.state\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        gamelogic.onGameStateChange( state )\n    }\n    if (state == TuiBingConfig.State.WaitOpen) {\n        cc.ll.notice.removeMsg(998);\n    }\n}\n\nvar onGoldChange = function( pack ){\n    var gold = pack.gold;\n    pMgr.main_role.onGoldChanged( gold );\n}\n\nvar onTuiBingBet = function( pack ) {\n    var result = pack.result;\n    var id = pack.id;\n    var pos = pack.pos;\n    var gold = pack.gold;\n    if (result == 0){\n        var node = cc.find(\"GameBgLayer\");\n        if( node ){\n            var gamelogic = node.getComponent( \"GameLogic\" );\n            gamelogic.onGoldAction( id, pos, gold )\n        }\n    }else{\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar onKeepBanker = function( pack ) {\n    let begincallback = function() {\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 0;\n        p.lpack.gold = 200000;\n        cc.ll.net.send( p.pack() );\n    }\n    let endcallback = function() {\n        //下庄\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 1;\n        p.lpack.gold = 0;\n        cc.ll.net.send( p.pack() );\n    }\n    cc.ll.notice.addMsg (1,msgcode.TUIBING_KEEP_BANKER, begincallback, endcallback, 998);\n}\n\nvar onBankerBegin = function( pack ) {\n    let begincallback = function() {\n        var p = new packet( \"ReqTuiBingBegin\" );\n        cc.ll.net.send( p.pack() );\n    }\n    let endcallback = function() {\n        //下庄\n        var p = new packet( \"ReqKeepBanker\" );\n        p.lpack.iskeep = 1;\n        p.lpack.gold = 0;\n        cc.ll.net.send( p.pack() );\n    }\n    cc.ll.notice.addMsg (1,msgcode.TUIBING_BANKER_BEGIN, begincallback, endcallback, 998)\n}\n\nvar onTuiBingBetGold = function( pack ) {\n    var gold = pack.gold;\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        // gamelogic.onGoldAction( gold )\n        gamelogic.onBetGoldCount( gold );\n    }\n}\n\nvar onDealMajiang = function( pack ) {\n    var majiangs = pack.majiangs\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        // gamelogic.onGoldAction( gold )\n        gamelogic.onOpenMajiang( majiangs );\n    }\n}\n\nvar onCloseClient = function( pack ) {\n    var type = pack.type\n    if(type == 1){\n        let okcallback = function(argument) {\n            sSceneMgr.onChangeScene(\"loginview\");\n        }\n        cc.ll.notice.addMsg ( 2, msgcode.NETWORK_OTHER_LOGIN, okcallback);\n    }\n}\n\nvar onTuibingBankerInfo = function( pack ) {\n    var obj = {\n        name:pack.name,\n        id : pack.id,\n        gold : pack.gold,\n        times : pack.times,\n    };\n    var node = cc.find(\"GameBgLayer\");\n    if( node ){\n        var gamelogic = node.getComponent( \"GameLogic\" );\n        gamelogic.onBankerInfo( obj );\n    }\n}\n\nvar onResKeepBanker = function( pack ) {\n    var result = pack.result;\n    if (result != 0 ){\n        cc.ll.msgbox.addMsg(result);\n    }\n}\n\nvar FuncMap = {\n    \"Reslogin\": onLogin,\n    \"ResRegister\" : onRegister,\n    \"ResEnterRoom\" : onEnterRoom,\n    \"ResBeBanker\" : onBeBanker,\n    \"ResTuiBingQueueChange\" : onTuiBingQueueChange,\n    \"ToTuiBingGameState\" : onTuiBingGameState,\n    \"ToGoldChange\" : onGoldChange,\n    \"ResTuiBingBet\" : onTuiBingBet,\n    \"ToKeepBanker\" : onKeepBanker,\n    \"ResKeepBanker\" : onResKeepBanker,\n    \"ToBankerBegin\" : onBankerBegin,\n    \"ToTuiBingBetGold\" : onTuiBingBetGold,\n    \"ToDealMajiang\" : onDealMajiang,\n    \"ToCloseClient\" : onCloseClient,\n    \"ToTuibingBankerInfo\" : onTuibingBankerInfo,\n    \"ResTuiBingUnbanker\" : onTuibingUnbanker,\n    \"ResTuibingLeaveQueue\" : onTuibingLeaveQueue,\n}\n\nvar msgdispatch = cc.Class({\n    // extends: cc.Component,\n    name : \"MsgDispatch\",\n    statics:{\n        dispatch : function(head, buffer){\n            var func = FuncMap[head];\n            if (func !== null) {\n                var p = new packet( head );\n                p.unpack( buffer );\n                func( p.msg );\n            }\n        },\n    },\n})\nmodule.exports = msgdispatch;"
  ]
}